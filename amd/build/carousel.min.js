define(["jquery","theme_bootstrapbase/bootstrap","core/log"],function(t,e,i){"use strict";i.debug("Essential carousel AMD");var s=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};s.prototype={cycle:function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.dirright?this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.prev,this),this.options.interval)):this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(e){var i=this.getActiveIndex(),s=this;if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid",function(){s.to(e)}):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",t(this.$items[e]))},pause:function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition.end&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(e,i){var s,n=this.$element.find(".item.active"),a=i||n[e](),r=this.interval,l="next"==e?"left":"right",o="next"==e?"first":"last",h=this;if(this.sliding=!0,r&&this.pause(),a=a.length?a:this.$element.find(".item")[o](),s=t.Event("slide",{relatedTarget:a[0],direction:l}),!a.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var e=t(h.$indicators.children()[h.getActiveIndex()]);e&&e.addClass("active")})),t.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(s),s.isDefaultPrevented())return;a.addClass(e),a[0].offsetWidth,n.addClass(l),a.addClass(l),this.$element.one(t.support.transition.end,function(){a.removeClass([e,l].join(" ")).addClass("active"),n.removeClass(["active",l].join(" ")),h.sliding=!1,setTimeout(function(){h.$element.trigger("slid")},0)})}else{if(this.$element.trigger(s),s.isDefaultPrevented())return;n.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return r&&this.cycle(),this}}};var n=t.fn.carousel;return t.fn.carousel=function(e){return this.each(function(){var i=t(this),n=i.data("carousel"),a=t.extend({},t.fn.carousel.defaults,"object"==typeof e&&e),r="string"==typeof e?e:a.slide;n||i.data("carousel",n=new s(this,a)),"number"==typeof e?n.to(e):r?n[r]():a.interval&&n.pause().cycle()})},t.fn.carousel.defaults={interval:5e3,pause:"hover"},t.fn.carousel.Constructor=s,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this},t(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var i,s,n=t(this),a=t(n.attr("data-target")||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),r=t.extend({},a.data(),n.data());a.carousel(r),(s=n.attr("data-slide-to"))&&a.data("carousel").pause().to(s).cycle(),e.preventDefault()}),{init:function(e){i.debug("Essential carousel AMD init, slide interval: "+e.slideinterval+", slideright: "+e.slideright),t(document).ready(function(t){t("#essentialbeCarousel").carousel({interval:e.slideinterval,dirright:e.slideright})})}}});